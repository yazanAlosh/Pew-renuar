<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>סורק מק״ט + חיפוש רנואר (Lite)</title>
  <style>
    :root{--blue:#007bff;--blue2:#0056b3;--text:#222;--muted:#666;--bg:#f7f7f8;--card:#fff}
    *{box-sizing:border-box}html,body{margin:0;padding:0} body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);line-height:1.5}
    header{background:linear-gradient(90deg,var(--blue),var(--blue2));color:#fff;text-align:center;padding:14px 16px}
    header h1{margin:6px 0 0;font-size:20px}
    .wrap{max-width:900px;margin:16px auto;padding:12px}
    .card{background:var(--card);border-radius:12px;box-shadow:0 6px 16px rgba(0,0,0,.08);padding:16px;margin-bottom:12px}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    input{flex:1;min-width:220px;padding:12px;border:1px solid #dcdcdc;border-radius:10px;font-size:16px}
    button{background:var(--blue);color:#fff;border:0;border-radius:10px;padding:12px 16px;font-size:16px;cursor:pointer}
    button:hover{background:var(--blue2)} .ghost{background:#fff;color:var(--blue);border:1px solid #dcdcdc}
    .muted{color:var(--muted);font-size:14px;margin-top:6px}
    .ok{color:#118a2c;font-weight:700;margin-top:6px} .err{color:#c0392b;font-weight:700;margin-top:6px}
    iframe{width:100%;height:60vh;border:1px solid #eee;border-radius:10px;background:#fff;margin-top:8px;display:none}
  </style>
</head>
<body>
  <header><h1>סורק מק״ט + חיפוש באתר רנואר</h1></header>

  <main class="wrap">
    <section class="card">
      <div class="row">
        <input id="code" type="text" inputmode="numeric" placeholder="הכנס או סרוק מק״ט">
        <button onclick="checkPrice()">בדוק מחיר</button>
        <button class="ghost" onclick="searchRenuar()">חפש ברנואר</button>
        <button class="ghost" onclick="openNew()">פתח בטאב חדש</button>
        <button class="ghost" onclick="clearAll()">נקה</button>
      </div>
      <div id="msg" class="muted">טיפ: Enter يفحص ويبحث.</div>
      <div id="priceRes"></div>
    </section>

    <section class="card">
      <strong>תוצאות באתר רנואר (במסגרת):</strong>
      <iframe id="frame" title="תוצאות חיפוש רנואר"></iframe>
      <div class="muted">إذا لم يظهر داخل الإطار بسبب سياسات الموقع، استخدم "פתח בטאב חדש".</div>
    </section>
  </main>

  <script>
    // جدول أسعار بسيط للتجربة
    const prices = { "111":"₪50","222":"₪75","333":"₪120","444":"₪200" };

    // أدوات
    function val(){ return (document.getElementById('code').value||'').trim().replace(/[^\dA-Za-z]/g,''); }
    function url(c){ return 'https://www.renuar.co.il/catalogsearch/result/?q='+encodeURIComponent(c); }
    function setMsg(cls, text){ const m=document.getElementById('msg'); m.className=cls; m.textContent=text; }

    // أزرار
    function checkPrice(){
      const c = val();
      const box = document.getElementById('priceRes');
      if(!c){ setMsg('err','נא להזין מק״ט'); box.textContent=''; return; }
      if(prices[c]){ box.className='ok'; box.textContent='💰 '+prices[c]; }
      else{ box.className='err'; box.textContent='❌ לא נמצא בטבלה'; }
    }
    function searchRenuar(){
      const c = val(); if(!c){ setMsg('err','נא להזין מק״ט'); return; }
      const f = document.getElementById('frame');
      f.src = url(c); f.style.display='block';
      setMsg('muted','טוען תוצאות…');
    }
    function openNew(){
      const c = val(); if(!c){ setMsg('err','נא להזין מק״ט'); return; }
      window.open(url(c), '_blank', 'noopener');
    }
    function clearAll(){
      document.getElementById('code').value='';
      document.getElementById('frame').removeAttribute('src');
      document.getElementById('frame').style.display='none';
      document.getElementById('priceRes').textContent='';
      setMsg('muted','טיפ: Enter يفحص ويبحث.');
    }

    // Enter = فحص + بحث
    document.getElementById('code').addEventListener('keydown', function(e){
      if(e.key==='Enter'){ e.preventDefault(); checkPrice(); searchRenuar(); }
    });
  </script>
</body>
</html>
